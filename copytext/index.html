<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <title>Work Categories App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
    }
  </script>
</head>

<body class="bg-gray-100 dark:bg-gray-900 min-h-screen">
  <div class="container mx-auto p-6">
    <div class="flex items-center justify-between">
      <h1 class="text-3xl font-bold mb-6 text-gray-800 dark:text-gray-50">Copy Text App</h1>
      <button id="darkModeToggle" class="mb-4 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition duration-300">
        ðŸŒ—
      </button>
    </div>

    <!-- Preview Window -->
    <div class="relative">
      <div class="w-fit absolute top-2 left-4 mb-3 text-xs rounded text-gray-200 bg-fuchsia-800 bg-opacity-100 px-2 py-1">Preview</div>
      <div id="preview" class="bg-white dark:bg-gray-800 pt-10 pb-4 px-4 rounded-lg shadow-md mb-4 h-60 overflow-y-auto dark:text-gray-200"></div>
    </div>

    <!-- Add Custom Button -->
    <div class="mb-4">
      <button id="addCustomBtn" class="bg-teal-500 text-white px-4 py-2 rounded hover:bg-teal-600 transition duration-300">
        + Add Custom Button
      </button>
    </div>

    <!-- Custom Button Modal -->
    <div id="customBtnModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 hidden items-center justify-center">
      <div class="bg-white dark:bg-gray-900 p-6 rounded-lg shadow-lg">
        <h2 class="text-xl dark:text-white font-bold mb-2">Add Custom Button</h2>
        <p class="text-sm dark:text-white mb-6">For now, this is saved locally in your browser.</p>
        <input id="customBtnTitle" type="text" placeholder="Button Title" class="w-full mb-2 p-2 border rounded bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600 focus:ring-teal-500 dark:focus:ring-teal-500 focus:border-teal-500 dark:focus:border-teal-500">
<textarea id="customBtnText" placeholder="Button Text" class="w-full mb-4 p-2 border rounded bg-white dark:bg-gray-700 text-gray-800 dark:text-gray-200 border-gray-300 dark:border-gray-600 focus:ring-teal-500 dark:focus:ring-teal-500 focus:border-teal-500 dark:focus:border-teal-500" rows="4"></textarea>
        <div class="flex justify-end">
          <button id="cancelCustomBtn" class="bg-gray-300 text-gray-800 px-4 py-2 rounded mr-2 hover:bg-gray-400 transition duration-300">Cancel</button>
          <button id="saveCustomBtn" class="bg-teal-500 text-white px-4 py-2 rounded hover:bg-teal-600 transition duration-300">Save</button>
        </div>
      </div>
    </div>

    <!-- Tabs -->
    <div class="mb-4">
      <nav class="flex space-x-4" aria-label="Tabs">
        <button class="tab-btn bg-white px-3 py-2 font-medium text-sm rounded text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition duration-300" data-tab="domain">Domain</button>
        <button class="tab-btn bg-white px-3 py-2 font-medium text-sm rounded text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition duration-300" data-tab="builder">Builder</button>
        <button class="tab-btn bg-white px-3 py-2 font-medium text-sm rounded text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition duration-300" data-tab="account">Account</button>
        <button class="tab-btn bg-white px-3 py-2 font-medium text-sm rounded text-gray-600 hover:text-gray-800 hover:bg-gray-100 transition duration-300" data-tab="others">Others</button>
      </nav>
    </div>

    <!-- Tab Content -->
    <div id="tabContent" class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md"></div>
  </div>

  <script>
    const categories = ['domain', 'builder', 'account', 'others'];
    const buttons = {
      domain: [{
          title: 'Domain 1',
          text: 'This is domain text 1.\nIt can have multiple lines.'
        },
        {
          title: 'Domain 2',
          text: 'This is domain text 2.\nAnother line here.'
        },
        // Add more predefined buttons for the domain category
      ],
      builder: [{
          title: 'Builder 1',
          text: 'This is builder text 1.\nIt can have multiple lines.'
        },
        {
          title: 'Builder 2',
          text: 'This is builder text 2.\nAnother line here.'
        },
        // Add more predefined buttons for the builder category
      ],
      account: [{
          title: 'Account 1',
          text: 'This is account text 1.\nIt can have multiple lines.'
        },
        {
          title: 'Account 2',
          text: 'This is account text 2.\nAnother line here.'
        },
        // Add more predefined buttons for the account category
      ],
      others: [{
          title: 'Other 1',
          text: 'This is other text 1.\nIt can have multiple lines.'
        },
        {
          title: 'Other 2',
          text: 'This is other text 2.\nAnother line here.'
        },
        // Add more predefined buttons for the others category
      ],
    };
    const preview = document.getElementById('preview');
    const tabContent = document.getElementById('tabContent');
    const addCustomBtn = document.getElementById('addCustomBtn');
    const customBtnModal = document.getElementById('customBtnModal');
    const customBtnTitle = document.getElementById('customBtnTitle');
    const customBtnText = document.getElementById('customBtnText');
    const cancelCustomBtn = document.getElementById('cancelCustomBtn');
    const saveCustomBtn = document.getElementById('saveCustomBtn');

    function createButton(title, text, category, isCustom = false) {
      const button = document.createElement('button');
      button.className = 'bg-transparent border border-teal-500 dark:text-white text-gray-600 py-2 px-4 rounded inline-flex items-center justify-between mr-3 mb-2 hover:bg-teal-600 hover:bg-opacity-20 transition duration-300';
      
      let buttonContent = `<span>${title}</span>`;
      if (isCustom) {
        buttonContent += `<span class="delete-btn text-red-500 hover:text-red-700 ml-4">&times;</span>`;
      }
      button.innerHTML = buttonContent;

      button.addEventListener('click', (e) => {
        if (!e.target.classList.contains('delete-btn')) {
          copyToClipboard(text, button);
        }
      });
      button.addEventListener('mouseover', () => showPreview(text));
      button.addEventListener('mouseout', () => clearPreview());

      if (isCustom) {
        const deleteBtn = button.querySelector('.delete-btn');
        deleteBtn.addEventListener('click', (e) => {
          e.stopPropagation();
          deleteButton(button, category, title);
        });
      }

      return button;
    }

    function deleteButton(button, category, title) {
      if (confirm('Are you sure you want to delete this button?')) {
        buttons[category] = buttons[category].filter(btn => btn.title !== title);
        saveToLocalStorage();
        renderButtons(category); // Re-render the buttons for the current category
      }
    }

    function renderButtons(category) {
      tabContent.innerHTML = '';
      buttons[category].forEach(btn => {
        tabContent.appendChild(createButton(btn.title, btn.text, category, btn.isCustom));
      });
    }

    // Function to close the modal
    function closeModal() {
      customBtnModal.classList.add('hidden');
      customBtnModal.classList.remove('flex');
      customBtnTitle.value = '';
      customBtnText.value = '';
    }

    // Event listener for clicking outside the modal
    customBtnModal.addEventListener('click', (e) => {
      if (e.target === customBtnModal) {
        closeModal();
      }
    });

    function showPreview(text) {
      preview.innerHTML = text.replace(/\n/g, '<br>');
    }

    function clearPreview() {
      preview.innerHTML = '';
    }

    function copyToClipboard(text, button) {
      navigator.clipboard.writeText(text).then(() => {
        const originalContent = button.innerHTML;
        const originalClasses = button.className;
        
        // Change button content and style
        button.innerHTML = 'Copied âœ“';
        button.className = 'bg-teal-500 text-white py-2 px-4 rounded inline-flex items-center justify-center mr-3 mb-2 transition duration-300';
        
        setTimeout(() => {
          button.innerHTML = originalContent;
          button.className = originalClasses;
        }, 2000); // Revert after 2 seconds
      });
    }

    function saveToLocalStorage() {
      localStorage.setItem('customButtons', JSON.stringify(buttons));
    }

    function loadFromLocalStorage() {
      const savedButtons = localStorage.getItem('customButtons');
      if (savedButtons) {
        const parsedButtons = JSON.parse(savedButtons);
        for (const category in parsedButtons) {
          buttons[category] = parsedButtons[category].map(btn => ({
            ...btn,
            isCustom: btn.isCustom || false
          }));
        }
      }
    }
    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => {
          b.classList.remove('bg-teal-500', 'text-white');
          b.classList.add('bg-white', 'text-gray-600');
        });
        btn.classList.remove('bg-white', 'text-gray-600');
        btn.classList.add('bg-teal-500', 'text-white');
        renderButtons(btn.dataset.tab);
      });
    });
    // Add custom button
    addCustomBtn.addEventListener('click', () => {
      customBtnModal.classList.remove('hidden');
      customBtnModal.classList.add('flex');
    });
    cancelCustomBtn.addEventListener('click', closeModal);
    saveCustomBtn.addEventListener('click', () => {
      const title = customBtnTitle.value.trim();
      const text = customBtnText.value.trim();
      const activeTab = document.querySelector('.tab-btn.bg-teal-500').dataset.tab;
      if (title && text) {
        buttons[activeTab].push({
          title,
          text,
          isCustom: true
        });
        saveToLocalStorage();
        renderButtons(activeTab);
        closeModal();
      } else {
        alert('Please enter both a title and text for the custom button.');
      }
    });
    // Initialize
    loadFromLocalStorage();
    document.querySelector('.tab-btn').click(); // Activate the first tab

    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    const html = document.documentElement;

    darkModeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      localStorage.setItem('darkMode', html.classList.contains('dark'));
    });

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      html.classList.add('dark');
    }
  </script>
</body>

</html>
